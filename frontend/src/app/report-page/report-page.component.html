<form *ngIf="!report" [formGroup]="classSelectorForm" class="d-flex p-2 flex-row justify-content-md-start">
    <div class="ms-5 mt-5 fs-5">
      <label>Select Class:</label>
    <select formControlName="classID">
      <option *ngFor="let cls of classes" [value]="cls._id">{{ cls.class_name }}</option>
    </select>
    </div>
  
    <div *ngIf="subjects.length > 0"  class="ms-5 mt-5 fs-5">
      <label>Select Subject:</label>
      <select formControlName="subjectID">
        <option *ngFor="let sub of subjects" [value]="sub._id">{{ sub.name }}</option>
      </select>
    </div>
  
    <div  *ngIf="classSelectorForm.get('classID')?.value && classSelectorForm.get('subjectID')?.value"
    class="ms-5 mt-5 fs-5">
      <label>Roll No:</label>
      <input type="text" formControlName="studentRoll">
    </div>


    <button  class="ms-5 mt-5 fs-5"
      *ngIf="classSelectorForm.get('classID')?.value && classSelectorForm.get('subjectID')?.value"
      (click)="getReport()"
      type="button"
    >
      Show Attendance
    </button>
  </form>


  <div *ngIf="report" class="report-container">
    <!-- <h2 class="display-5 justify-center">Fetched Report</h2> -->
    <div class="circle-progress">
      <circle-progress
        [percent]="(+report.presentCount / +report.totalCount) * 100"
        [radius]="60"
        [outerStrokeWidth]="10"
        [outerStrokeColor]="'#4EC7B5'"
        [innerStrokeWidth]="0"
        [showTitle]="true"
        [showUnits]="false"
        [showSubtitle]="true"
        [showBackground]="true"
        [animation]="true"
        [animationDuration]="500"
        [responsive]="true"
        [title]="report.presentCount.toString()"
        [subtitle]="'/ '+report.totalCount.toString()"
      >
      </circle-progress>
    </div>

    <div class="heat-map">
      <div class="present-day calender-cell"
        *ngFor="let day of heatmapData" 
        [ngClass]="{
          'present-day': day.present,
          'absent-day': !day.present,
          'calendar-cell': true
        }" [title]="moment(day.date).format('MMM D')">
      </div>
    </div>

  </div>